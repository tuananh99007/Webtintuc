(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{380:function(e,a,t){"use strict";t.r(a),t.d(a,"default",(function(){return S}));var n=t(74),r=t.n(n),l=t(0),o=t.n(l),c=t(19),s=t(76),i=t(11),m=t.n(i),d=t(368),p=t.n(d),b=t(9),u=t.n(b),g=t(20),f=t(10);function h(e,a){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);a&&(n=n.filter((function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable}))),t.push.apply(t,n)}return t}function E(e){for(var a=1;a<arguments.length;a++){var t=null!=arguments[a]?arguments[a]:{};a%2?h(Object(t),!0).forEach((function(a){m()(e,a,t[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):h(Object(t)).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(t,a))}))}return e}function v(){var e=null,a=Object(c.b)();return o.a.createElement(p.a,{appId:f.c,fields:"name,email,picture",disableMobileRedirect:!0,callback:function(t){e&&e(),u.a.post(f.e,t,{cancelToken:new b.CancelToken((function(a){e=a}))}).then((function(e){var t=e.data;200!==t.code?a({type:"LOGIN_ERROR",payload:E(E({},t),{},{showMessage:!0})}):(a({type:"LOGIN_SUCCESS",payload:t}),Object(g.e)())})).catch((function(e){a({type:"LOGIN_ERROR",payload:{messageType:"danger",message:"Có lỗi xảy ra! Vui lòng kiểm tra lại kết nối của bạn"}})}))},render:function(e){return o.a.createElement("button",{type:"button",className:"btn btn-lg btn-fb btn-block mb-3 text-white",onClick:e.onClick},o.a.createElement("i",{className:"tmp-facebook pr-1"}," ")," Facebook")}})}t(369);var N=t(21);function O(e,a){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);a&&(n=n.filter((function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable}))),t.push.apply(t,n)}return t}function w(e){for(var a=1;a<arguments.length;a++){var t=null!=arguments[a]?arguments[a]:{};a%2?O(Object(t),!0).forEach((function(a){m()(e,a,t[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):O(Object(t)).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(t,a))}))}return e}function y(){var e=Object(l.useState)({email:"",password:"",isLoading:!1,errorMessage:"",message:""}),a=r()(e,2),t=a[0],n=a[1],s=null,i=Object(c.b)();return o.a.createElement("div",{className:"tab-pane fade show active",id:"tab-login",role:"tabpanel","aria-labelledby":"tab-login-item"},o.a.createElement("div",{className:"d-flex align-items-center pb-4 row"},o.a.createElement("div",{className:"col-12 col-md-6 border-right"},o.a.createElement("div",{className:"pb-3 text-center"},"Đăng nhập với email"),o.a.createElement("form",null,o.a.createElement("div",{className:"form-group"},o.a.createElement("input",{onChange:function(e){return n(w(w({},t),{},{email:e.target.value}))},type:"email",className:"form-control",placeholder:"Email"})),o.a.createElement("div",{className:"form-group"},o.a.createElement("input",{onChange:function(e){return n(w(w({},t),{},{password:e.target.value}))},type:"password",className:"form-control",placeholder:"Mật khẩu"})),o.a.createElement("div",{className:"form-group"},o.a.createElement("div",{className:"form-check"},o.a.createElement("input",{className:"form-check-input",type:"checkbox",id:"gridCheck"}),o.a.createElement("label",{className:"form-check-label",htmlFor:"gridCheck"},"Ghi nhớ tài khoản"))),o.a.createElement("div",{className:"mb-3"},t.errorMessage?o.a.createElement("div",{className:"alert alert-danger"},t.errorMessage):null),o.a.createElement("div",{className:"mb-3"},t.isLoading?o.a.createElement(N.a,null):o.a.createElement("button",{onClick:function(){var e=t.email?t.password&&""!==t.password.trim()?t.password.trim().length<6?"Mật khẩu phải có ít nhất 6 kí tự":void 0:"Vui lòng nhập mật khẩu":"Vui lòng nhập email";e?n(w(w({},t),{},{errorMessage:e})):(n(w(w({},t),{},{isLoading:!0})),s&&s(),u.a.post(f.g,{email:t.email,password:t.password},{cancelToken:new b.CancelToken((function(e){s=e}))}).then((function(e){var a=e.data;200!==a.code?(Object(g.d)(a,!1),n(w(w({},t),{},{isLoading:!1,errorMessage:a.message}))):(i({type:"LOGIN_SUCCESS",payload:w(w({},a),{},{showMessage:!0})}),Object(g.e)()),s=null})).catch((function(e){n(w(w({},t),{},{isLoading:!1,errorMessage:"Có lỗi xảy ra! Vui lòng kiểm tra lại kết nối của bạn"}))})))},type:"submit",className:"btn btn-secondary font-weight-bold btn-block"},"ĐĂNG NHẬP")),o.a.createElement("div",{className:"text-center mt-3",onClick:function(){i({type:"FORGOT_PASSWORD"})}},o.a.createElement("a",{href:"#"},"Lấy lại mật khẩu")))),o.a.createElement("div",{className:"col-12 col-md-6"},o.a.createElement("div",{className:"pb-3 text-center"},"Hoặc"),o.a.createElement("div",{className:"pl-5 pr-5"},o.a.createElement(v,null)))))}function k(e,a){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);a&&(n=n.filter((function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable}))),t.push.apply(t,n)}return t}function j(e){for(var a=1;a<arguments.length;a++){var t=null!=arguments[a]?arguments[a]:{};a%2?k(Object(t),!0).forEach((function(a){m()(e,a,t[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):k(Object(t)).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(t,a))}))}return e}function C(){var e=Object(l.useState)({email:"",password:"",isLoading:!1,errorMessage:"",message:""}),a=r()(e,2),t=a[0],n=a[1],s=null,i=Object(c.b)();return o.a.createElement("div",{className:"tab-pane fade",id:"tab-signup",role:"tabpanel","aria-labelledby":"tab-signup-item"},o.a.createElement("div",{className:"d-flex align-items-center row"},o.a.createElement("div",{className:"col-12 col-md-6 border-right"},o.a.createElement("div",{className:"pb-3 text-center"},"Tạo tài khoản để sử dụng đầy đủ tính năng đọc báo và trở thành cộng tác viên cùng ",o.a.createElement("span",{className:"colorRed"},"Người Đưa Tin Pháp Luật")),o.a.createElement("form",null,o.a.createElement("div",{className:"form-group"},o.a.createElement("input",{onChange:function(e){return n(j(j({},t),{},{email:e.target.value}))},type:"email",className:"form-control",placeholder:"Email",required:!0})),o.a.createElement("div",{className:"form-group"},o.a.createElement("input",{onChange:function(e){return n(j(j({},t),{},{password:e.target.value}))},type:"password",className:"form-control",placeholder:"Mật khẩu",required:!0})),o.a.createElement("div",{className:"form-group"},o.a.createElement("div",{className:"form-check"},o.a.createElement("input",{className:"form-check-input",type:"checkbox",id:"gridCheck"}),o.a.createElement("label",{className:"form-check-label",htmlFor:"gridCheck"},"Ghi nhớ tài khoản"))),o.a.createElement("div",{className:"mb-3"},t.errorMessage?o.a.createElement("div",{className:"alert alert-danger"},t.errorMessage):null),o.a.createElement("div",{className:"mb-3"},t.isLoading?o.a.createElement(N.a,null):o.a.createElement("button",{onClick:function(){var e=t.email?t.password&&""!==t.password.trim()?t.password.trim().length<6?"Mật khẩu phải có ít nhất 6 kí tự":void 0:"Vui lòng nhập mật khẩu":"Vui lòng nhập email";if(e)n(j(j({},t),{},{errorMessage:e}));else{n(j(j({},t),{},{isLoading:!0}));Object(g.a)();s&&s(),u.a.post(f.h,{email:t.email,password:t.password},{cancelToken:new b.CancelToken((function(e){s=e}))}).then((function(e){var a=e.data;200!==a.code?(Object(g.d)(a,!1),n(j(j({},t),{},{isLoading:!1,errorMessage:a.message}))):(i({type:"LOGIN_SUCCESS",payload:j(j({},a),{},{showMessage:!0})}),Object(g.e)()),s=null})).catch((function(e){n(j(j({},t),{},{isLoading:!1,errorMessage:"Có lỗi xảy ra! Vui lòng kiểm tra lại kết nối của bạn"}))}))}},type:"submit",className:"btn btn-secondary font-weight-bold btn-block"},"TẠO TÀI KHOẢN")))),o.a.createElement("div",{className:"col-12 col-md-6"},o.a.createElement("div",{className:"pb-3 text-center"},"Hoặc tạo tài khoản với"),o.a.createElement("div",{className:"pl-5 pr-5"},o.a.createElement(v,null)))),o.a.createElement("div",{className:"text-center mt-3 mb-4"},"Khi bấm tạo tài khoản bạn đã đồng ý với ",o.a.createElement("span",{className:"colorRed"},"quy định")," của tòa soạn"))}function S(e){var a=Object(c.c)((function(e){return e})),t=Object(l.useState)(""),n=r()(t,2),i=n[0],m=n[1],d=Object(l.useState)(""),p=r()(d,2),b=p[0],g=p[1],h=Object(l.useState)(!1),E=r()(h,2),v=E[0],O=E[1],w=a.showLogin||!1,k=w?"modal fade show d-block":"modal fade",j=Object(c.b)();function S(){j({type:"HIDE_LOGIN_FORM"})}return o.a.createElement(s.a,null,w?o.a.createElement("div",{className:"modal-backdrop fade show d-block",onClick:S}," "):null,a.isLoggedIn?o.a.createElement("div",{className:"profile-login ml-0 ml-md-3"},o.a.createElement("div",{className:"dropdown"},o.a.createElement("div",{className:"d-flex align-items-center avatar-user dropdown-toggle text-nowrap",role:"button",id:"dropdownProfile","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"},o.a.createElement("span",{className:"b-avatar mr-2 d-block rounded-circle overflow-hidden",style:{width:"2.5em",height:"2.5em"}},o.a.createElement("img",{src:a.avatar||f.b,alt:"avatar"})),o.a.createElement("span",{className:"mr-auto d-none d-lg-block"},a.fullName||a.email)),o.a.createElement("div",{className:"dropdown-menu dropdown-menu-right pt-0 mt-1","aria-labelledby":"dropdownProfile"},o.a.createElement("div",{className:"d-flex align-items-center nav-link px-2"},o.a.createElement("span",{className:"b-avatar mr-2 d-block rounded-circle overflow-hidden",style:{width:"2.5em",height:"2.5em"}},o.a.createElement("img",{src:a.avatar||f.b,alt:a.fullName})),o.a.createElement("span",{className:"mr-auto font-weight-bold display-name"},a.fullName||a.email)),o.a.createElement("a",{className:"dropdown-item border-top p-2",href:"/hoat-dong-binh-luan"},"Hoạt động bình luận"),o.a.createElement("a",{className:"dropdown-item border-top p-2",href:"/tai-khoan"},"Tài khoản của tôi"),o.a.createElement("a",{onClick:function(){j({type:"LOGOUT"})},className:"dropdown-item border-top p-2",href:"#"},"Thoát")))):o.a.createElement(s.a,null,o.a.createElement("div",{className:"user-login ml-md-3"},o.a.createElement("div",{onClick:function(){j({type:"SHOW_LOGIN_FORM"})},className:"btn-login d-flex align-items-center text-nowrap"},o.a.createElement("i",{className:"tmp-person"}),o.a.createElement("span",{className:"fontSize13 d-none d-md-inline-block"},"Đăng nhập")),o.a.createElement("div",{className:k,style:{pointerEvents:"none"},id:"box-login",tabIndex:"-1",role:"dialog"},o.a.createElement("div",{className:"modal-dialog modal-lg modal-dialog-centered"},o.a.createElement("div",{className:"modal-content overflow-hidden"},o.a.createElement("div",{className:"modal-header border-0"},o.a.createElement("button",{onClick:S,type:"button",className:"close position-absolute r-3","data-dismiss":"modal","aria-label":"Close"},o.a.createElement("span",{"aria-hidden":"true"},"×"))),a.showForgotPassword?o.a.createElement("div",null,o.a.createElement("div",{className:"cl-red px-4"},o.a.createElement("div",{className:"col-md-8 offset-md-2"},o.a.createElement("p",{className:"text-center fontSize18 fontTimes font-weight-bold fontTimes"},"QUÊN MẬT KHẨU"))),o.a.createElement("div",{className:"col-md-8 p-4 offset-md-2"},o.a.createElement("form",null,o.a.createElement("div",{className:"form-group pb-2"},o.a.createElement("input",{value:i,onChange:function(e){return m(e.target.value)},type:"email",className:"form-control",placeholder:"Email"})),b?o.a.createElement("div",{className:"alert alert-danger"},b):null,v?o.a.createElement(N.a,null):o.a.createElement("button",{type:"submit",onClick:function(e){e.preventDefault();var a=i?/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(i)?void 0:"Nhập đúng định dạng email":"Vui lòng nhập email";O(!0),a?(g(a),O(!1)):(g(""),u.a.post("/forgot-password",{email:i}).then((function(e){var a=e.data;200===a.code&&j({type:"FORGOT_PASSWORD_SUCCESS",payload:{showMessage:a.message}}),O(!1),m(""),S()})).catch((function(e){g("Có lỗi xảy ra! Vui lòng kiểm tra lại kết nối của bạn")})))},className:"btn btn-secondary font-weight-bold btn-block w-50 mx-auto"}," Gửi"),o.a.createElement("button",{type:"button",onClick:function(){j({type:"HIDDEN_FORGOT_PASS"})},className:"btn bg-transparent border-0 btn-block w-50 m-auto"}," Quay lại")))):o.a.createElement("div",null,o.a.createElement("div",{className:"list-group flex-row text-center row",id:"list-tab",role:"tablist"},o.a.createElement("a",{className:"col-12 col-md-6 fontTimes border-bottom font-weight-bold px-3 px-md-4 pb-3 pb-md-4 active",id:"tab-login-item","data-toggle":"list",href:"#tab-login",role:"tab","aria-controls":"login"},o.a.createElement("p",{className:"d-none d-md-block"},o.a.createElement("i",{className:"tmp-group-user fontSize28"}," ")),"ĐĂNG NHẬP"),o.a.createElement("a",{className:"mt-3 mt-md-0 col-12 col-md-6 fontTimes border-bottom font-weight-bold px-3 px-md-4 pb-3 pb-md-4",id:"tab-signup-item","data-toggle":"list",href:"#tab-signup",role:"tab","aria-controls":"profile"},o.a.createElement("p",{className:"d-none d-md-block"},o.a.createElement("i",{className:"tmp-user fontSize28"}," ")),"TẠO TÀI KHOẢN")),o.a.createElement("div",{className:"modal-body fontSize16"},o.a.createElement("div",{className:"tab-content",id:"nav-tabContent"},o.a.createElement(y,null),o.a.createElement(C,null))))))))))}}}]);